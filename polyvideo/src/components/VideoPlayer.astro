---
import { Image } from "astro:assets";
import playIcon from "../assets/images/play.svg";
import fullscreenIcon from "../assets/images/fullscreen.svg";
import volumeOn from "../assets/images/volume_on.svg";
const { videoSource } = Astro.props;
---

<div class="relative">
  <div id="video-container">
    <span title="Play Video"></span>
    <video id="media-video" class="w-full h-full">
      <source src={videoSource} type="video/mp4" />
    </video>
    <!-- container for custom controls -->
    <div class="text-white absolute -bottom-0 w-full p-3">
      <!-- Bottom gradient -->
      <div class="absolute bottom-0 left-0 h-15 w-full bg-linear-to-t from-black "></div>
      <!-- Progress Bar -->
      <div class="bg-gray-200 relative w-full h-1 mb-2.5 rounded-md">
        <div
          id="progress-bar"
          class="absolute top-0 left-0 h-full bg-blue-400 rounded-md"
        >
        </div>
        <input
          id="scrubber"
          type="range"
          min="0"
          max="100"
          value="0"
          class="timeline-bar absolute inset-0 w-full h-full opacity-0 cursor-pointer"
        />
      </div>

      <!-- Video Controls -->
      <!-- Clean up fix z-axis setup -->
      <div class="flex justify-between scale-z-100">
        <div class="flex justify-around gap-2">
          <!-- Remember to add accessibility options (labels etc) -->
          <button id="play-btn" class="cursor-pointer">
            <Image id="play-pause-icon" class="w-5" src={playIcon} alt="" />
          </button>
          <button id="mute-btn" class="cursor-pointer">
            <Image id="volume-icon" class="w-6" src={volumeOn} alt="" />
          </button>
          <input
            id="volume-slider"
            type="range"
            class="accent-gray-200 cursor-pointer"
          />
        </div>
        <div class="flex justify-around gap-2">
          <button id="fullscreen-btn" class="cursor-pointer">
            <Image
              id="fullscreen-icon"
              class="w-5"
              src={fullscreenIcon}
              alt=""
            />
          </button>
        </div>
      </div>
      <script type="module" src="src/scripts/video_player.ts"></script>
    </div>
  </div>
</div>
